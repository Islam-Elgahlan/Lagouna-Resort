"use strict";(self.webpackChunkLagouna_Resort=self.webpackChunkLagouna_Resort||[]).push([[465],{9465:(M,m,o)=>{o.r(m),o.d(m,{FacilitiesModule:()=>U});var r=o(6814),p=o(2787),h=o(4116),c=o(7700),t=o(5879),d=o(6223);let u=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i,this.facility=""}onNoClick(){this.dialogRef.close(),console.log(this.data)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.so),t.Y36(c.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-addeditview-facility"]],decls:12,vars:2,consts:[[1,"my-card"],[1,"d-flex","align-items-center","justify-content-between"],["routerLink","/admin/dashboard/facilities",1,"pointer",3,"click"],[1,"fa-regular","fa-circle-xmark","text-danger"],[1,"input-group","mb-3","my-4"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-wifi"],["type","text","placeholder","Facility name",1,"form-control",3,"ngModel","ngModelChange"],["cdkFocusInitial","",1,"btn","btn-primary","my-2","w-100",3,"mat-dialog-close"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1)(2,"span"),t._uU(3,"Add Facility"),t.qZA(),t.TgZ(4,"span",2),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"span",5),t._UZ(8,"i",6),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(s){return n.facility=s}),t.qZA()(),t.TgZ(10,"button",8),t._uU(11,"Save"),t.qZA()()),2&i&&(t.xp6(9),t.Q6J("ngModel",n.facility),t.xp6(1),t.Q6J("mat-dialog-close",n.facility))},dependencies:[p.rH,d.Fj,d.JJ,d.On,c.ZT]})}return a})(),f=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i,this.facility=""}onNoClick(){this.dialogRef.close(),console.log(this.data)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.so),t.Y36(c.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-edit-view"]],decls:12,vars:2,consts:[[1,"my-card"],[1,"d-flex","align-items-center","justify-content-between"],["routerLink","/admin/dashboard/facilities",1,"pointer",3,"click"],[1,"fa-regular","fa-circle-xmark","text-danger"],[1,"input-group","mb-3","my-4"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-wifi"],["type","text","placeholder","Facility name",1,"form-control",3,"ngModel","ngModelChange"],["cdkFocusInitial","",1,"btn","btn-primary","my-2","w-100",3,"mat-dialog-close"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1)(2,"span"),t._uU(3,"Add Facility"),t.qZA(),t.TgZ(4,"span",2),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"span",5),t._UZ(8,"i",6),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(s){return n.data.data.name=s}),t.qZA()(),t.TgZ(10,"button",8),t._uU(11,"Save"),t.qZA()()),2&i&&(t.xp6(9),t.Q6J("ngModel",n.data.data.name),t.xp6(1),t.Q6J("mat-dialog-close",n.data.data.name||n.facility))},dependencies:[p.rH,d.Fj,d.JJ,d.On,c.ZT]})}return a})();var _=o(9862);let y=(()=>{class a{constructor(e){this._HttpClient=e}getAllFacilities(e){return this._HttpClient.get("admin/room-facilities",{params:e})}deleteFacility(e){return this._HttpClient.delete(`admin/room-facilities/${e}`)}addFacility(e){return this._HttpClient.post("admin/room-facilities",{name:e})}updateFacility(e,i){return this._HttpClient.put(`admin/room-facilities/${i}`,{name:e})}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(_.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Z=o(2425),F=o(3365);function A(a,g){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e.createdBy?null:e.createdBy.userName)}}function T(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"Admin"),t.qZA())}function C(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t.YNc(4,A,2,1,"span",11),t.YNc(5,T,2,0,"span",11),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td",12)(10,"div",13)(11,"a",14),t._UZ(12,"i",15),t.qZA(),t.TgZ(13,"ul",16)(14,"li")(15,"a",17),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEditDialog(l))}),t.TgZ(16,"span"),t._UZ(17,"i",18),t.qZA(),t._uU(18," Edit "),t.qZA()(),t.TgZ(19,"li")(20,"a",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.openDeleteDialog(l))}),t.TgZ(21,"span"),t._UZ(22,"i",20),t.qZA(),t._uU(23," Delete "),t.qZA()()()()()()}if(2&a){const e=g.$implicit;t.Tol(g.even?"":"bg-secondary-subtle"),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.createdBy),t.xp6(1),t.Q6J("ngIf",!e.createdBy),t.xp6(2),t.Oqu(t.xi3(8,6,e.createdAt,"dd-MM-yyyy"))}}const b=function(){return[5,10,50,100]},v=[{path:"",redirectTo:"facilitiesHome",pathMatch:"full"},{path:"",component:(()=>{class a{constructor(e,i,n){this._FacilitiesService=e,this._MatDialog=i,this._toastr=n,this.pageIndex=0,this.pageSize=5,this.pageNumber=1,this.tableData=[]}ngOnInit(){this.getAllFacilities()}getAllFacilities(){this._FacilitiesService.getAllFacilities({size:this.pageSize,page:this.pageNumber}).subscribe({next:i=>{this.tableResponse=i.data,this.tableData=i.data.facilities},error:i=>{},complete:()=>{}})}openAddDialogue(){this._MatDialog.open(u,{data:{},width:"40%"}).afterClosed().subscribe(i=>{console.log(i),i&&this.onAddFacility(i)})}onAddFacility(e){this._FacilitiesService.addFacility(e).subscribe(i=>{this.getAllFacilities()})}onEditDialog(e){this._MatDialog.open(f,{data:{data:e},width:"40%"}).afterClosed().subscribe(n=>{n&&this.onEditFacility(n,e._id)})}onEditFacility(e,i){this._FacilitiesService.updateFacility(e,i).subscribe(n=>{this._toastr.success("Facility  Updated","Success"),this.getAllFacilities()},n=>{this._toastr.error(n,"Failed")})}openDeleteDialog(e){this._MatDialog.open(h.N,{data:e,width:"30%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),n&&this.deleteItem(n._id)})}deleteItem(e){this._FacilitiesService.deleteFacility(e).subscribe({next:i=>{console.log(i)},error:i=>{this._toastr.error("Try Again")},complete:()=>{this._toastr.success("Facility deleted Successfully"),this.getAllFacilities()}})}handlePageEvent(e){this.pageSize=e.pageSize,this.pageNumber=e.pageIndex+1,this.getAllFacilities()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(y),t.Y36(c.uw),t.Y36(Z._W))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-facilities-home"]],decls:24,vars:6,consts:[[1,"container","py-3"],[1,"page-header"],[1,"text-muted"],[1,"col-md-3","ms-auto","text-end"],[1,"main-btn","px-4",3,"click"],[1,"custom-table","my-3"],[1,"text-capitalize"],[3,"class",4,"ngFor","ngForOf"],[1,""],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","pageIndex","page"],[1,"py-3"],[4,"ngIf"],[1,"taxt-center"],[1,"dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-2x"],[1,"dropdown-menu"],[1,"dropdown-item","pointer","py-2","blue",3,"click"],[1,"fa-regular","fa-pen-to-square","px-2"],[1,"dropdown-item","pointer","blue",3,"click"],[1,"fa-solid","fa-trash","px-2"]],template:function(i,n){1&i&&(t.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h2"),t._uU(4,"Facilities Table Details"),t.qZA(),t.TgZ(5,"span",2),t._uU(6,"You can check all details here!"),t.qZA(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return n.openAddDialogue()}),t._uU(9,"Add New Facility"),t.qZA()()()(),t.TgZ(10,"table",5)(11,"thead",6)(12,"th"),t._uU(13,"Facility."),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Created By"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Created At"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Actions"),t.qZA()(),t.TgZ(20,"tbody"),t.YNc(21,C,24,9,"tr",7),t.qZA()(),t.TgZ(22,"div",8)(23,"mat-paginator",9),t.NdJ("page",function(s){return n.handlePageEvent(s)}),t.qZA()()()),2&i&&(t.xp6(21),t.Q6J("ngForOf",n.tableData),t.xp6(2),t.Q6J("length",null==n.tableResponse?null:n.tableResponse.totalCount)("pageSizeOptions",t.DdM(5,b))("pageSize",null==n.tableResponse?null:n.tableResponse.pageSize)("pageIndex",n.pageIndex))},dependencies:[r.sg,r.O5,F.NW,r.uU]})}return a})()},{path:"addeditview",component:u},{path:"addeditview/:id",component:u}];let x=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(v),p.Bz]})}return a})();var w=o(9218);let U=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[r.ez,x,w.m]})}return a})()}}]);