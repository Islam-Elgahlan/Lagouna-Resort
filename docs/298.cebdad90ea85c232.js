"use strict";(self.webpackChunkLagouna_Resort=self.webpackChunkLagouna_Resort||[]).push([[298],{5298:(D,g,a)=>{a.r(g),a.d(g,{RoomsModule:()=>J});var c=a(6814),d=a(2787),_=a(4116),e=a(5879),u=a(2425),h=a(9788),v=a(7700),Z=a(3365);function b(i,l){1&i&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2,"No Image"),e.qZA()())}function x(i,l){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"img",26),e.qZA()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("src",o.images[0],e.LSH)}}function R(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",10),e.YNc(4,b,3,0,"div",11),e.YNc(5,x,2,1,"div",12),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",13)(13,"div",14)(14,"a",15),e._UZ(15,"i",16),e.qZA(),e.TgZ(16,"ul",17)(17,"li")(18,"a",18)(19,"span"),e._UZ(20,"i",19),e.qZA(),e._uU(21," view "),e.qZA()(),e.TgZ(22,"li")(23,"a",20)(24,"span"),e._UZ(25,"i",21),e.qZA(),e._uU(26," Edit "),e.qZA()(),e.TgZ(27,"li")(28,"a",22),e.NdJ("click",function(){const s=e.CHM(o).$implicit,m=e.oxw();return e.KtG(m.openDeleteDialog(s))}),e.TgZ(29,"span"),e._UZ(30,"i",23),e.qZA(),e._uU(31," Delete "),e.qZA()()()()()()}if(2&i){const o=l.$implicit;e.Tol(l.even?"":"bg-secondary-subtle"),e.xp6(2),e.Oqu(o.roomNumber),e.xp6(2),e.Q6J("ngIf",!o.images[0]),e.xp6(1),e.Q6J("ngIf",o.images[0]),e.xp6(2),e.Oqu(o.price),e.xp6(2),e.Oqu(o.discount),e.xp6(2),e.Oqu(o.capacity),e.xp6(12),e.Q6J("routerLink","addeditview/"+o._id)}}const T=function(){return[5,10,50,100]};let A=(()=>{class i{constructor(o,t,n){this._toastr=o,this._RoomsService=t,this.dialog=n,this.view=!0,this.pageIndex=0,this.pageSize=15,this.pageNumber=1,this.tableData=[],this.numberOfTasks=0}ngOnInit(){this.onGetAllRooms()}onGetAllRooms(){this._RoomsService.onGetRooms({size:this.pageSize,page:this.pageNumber}).subscribe({next:t=>{console.log(t),this.tableResponse=t.data,this.tableData=t.data.rooms,console.log(this.tableData)},error:t=>{console.log(t)}})}openDeleteDialog(o){console.log(o),this.dialog.open(_.N,{data:o,width:"30%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),n&&(this.deleteItem(n._id),this.onGetAllRooms())})}deleteItem(o){this._RoomsService.deleteRoom(o).subscribe({next:t=>{console.log(t)},error:t=>{this._toastr.error("Try Again")},complete:()=>{this._toastr.success("Room deleted Successfully"),this.onGetAllRooms()}})}handlePageEvent(o){this.pageSize=o.pageSize,this.pageNumber=o.pageIndex+1,this.onGetAllRooms()}static#e=this.\u0275fac=function(t){return new(t||i)(e.Y36(u._W),e.Y36(h.L),e.Y36(v.uw))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-rooms-home"]],decls:28,vars:6,consts:[[1,"container","py-3"],[1,"page-header"],[1,"text-muted"],[1,"col-md-3","ms-auto","text-end"],["routerLink","addeditview",1,"main-btn","px-4"],[1,"custom-table","my-3"],[1,"text-capitalize"],[3,"class",4,"ngFor","ngForOf"],[1,""],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","pageIndex","page"],[1,"d-flex","justify-content-center"],["class","m-auto",4,"ngIf"],["class","table-img",4,"ngIf"],[1,"taxt-center"],[1,"dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-2x"],[1,"dropdown-menu"],[1,"dropdown-item","pointer"],[1,"fa-solid","fa-eye","blue","px-2"],[1,"dropdown-item","pointer","py-2",3,"routerLink"],[1,"fa-regular","fa-pen-to-square","blue","px-2"],[1,"dropdown-item","pointer",3,"click"],[1,"fa-solid","fa-trash","blue","px-2"],[1,"m-auto"],[1,"table-img"],["crossorigin","anonymous","alt","",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h2"),e._uU(4,"Rooms Table Details"),e.qZA(),e.TgZ(5,"span",2),e._uU(6,"You can check all details"),e.qZA(),e.TgZ(7,"div",3)(8,"button",4),e._uU(9,"Add New Room"),e.qZA()()(),e.TgZ(10,"table",5)(11,"thead",6)(12,"th"),e._uU(13,"Room No."),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Image"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Price"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Discount"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Capacity"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Actions"),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,R,32,9,"tr",7),e.qZA()(),e.TgZ(26,"div",8)(27,"mat-paginator",9),e.NdJ("page",function(m){return n.handlePageEvent(m)}),e.qZA()()()()),2&t&&(e.xp6(25),e.Q6J("ngForOf",n.tableData),e.xp6(2),e.Q6J("length",null==n.tableResponse?null:n.tableResponse.totalCount)("pageSizeOptions",e.DdM(5,T))("pageSize",null==n.tableResponse?null:n.tableResponse.pageSize)("pageIndex",n.pageIndex))},dependencies:[c.sg,c.O5,d.rH,Z.NW]})}return i})();var r=a(6223),p=a(7680),w=a(4170),C=a(8525),S=a(3680);function y(i,l){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const o=l.$implicit;e.Q6J("value",o._id),e.xp6(1),e.Oqu(o.name)}}function N(i,l){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"i",22),e._uU(2," Upload "),e.qZA())}function I(i,l){1&i&&e._UZ(0,"img",24),2&i&&e.Q6J("src",l.$implicit,e.LSH)}function q(i,l){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e.YNc(1,I,1,1,"img",23),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.roomData.images)}}function U(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",25),e.NdJ("removed",function(){const s=e.CHM(o).$implicit,m=e.oxw();return e.KtG(m.onRemove(s))}),e.qZA()}if(2&i){const o=l.$implicit;e.Q6J("removable",!0)("file",o)}}let f=(()=>{class i{constructor(o,t,n,s){this._RoomsService=o,this._ActivatedRoute=t,this._ToastrService=n,this._Router=s,this.files=[],this.roomId="",this.hideRequiredMarker=!0,this.facilities=[],this.isUpdatePge=!1,this.roomForm=new r.cw({roomNumber:new r.NI(null,[r.kI.required]),price:new r.NI(null,[r.kI.required]),discount:new r.NI(null,[r.kI.required]),capacity:new r.NI(null,[r.kI.required]),facilities:new r.NI(null,[r.kI.required])}),this.roomId=t.snapshot.params.id,console.log(this.roomId),this.roomId?(this.isUpdatePge=!0,this.getRoomById(this.roomId)):this.isUpdatePge=!1}ngOnInit(){this.getAllFaclities()}getAllFaclities(){this._RoomsService.getFacilities().subscribe({next:o=>{console.log(o.data.facilities),this.facilities=o.data.facilities},error:o=>{},complete:()=>{}})}onSubmit(o){let t=new FormData;new Map(Object.entries(o.value)),t.append("roomNumber",o.value.roomNumber),t.append("price",o.value.price),t.append("discount",o.value.discount),t.append("capacity",o.value.capacity);for(const s of o.value.facilities)t.append("facilities",s);if(null!=this.imgSrc){for(let s=0;s<this.imgSrc.length;s++)t.append("imgs",this.imgSrc[s],this.imgSrc[s].name);console.log(t)}this.roomId?(console.log(t),this._RoomsService.updateRoom(this.roomId,t).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message)},error:s=>{this._ToastrService.error(s.message)},complete:()=>{this._Router.navigate(["/admin/dashboard/rooms"])}})):this._RoomsService.addRoom(t).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message)},error:s=>{this._ToastrService.error(s.errors.message)},complete:()=>{this._Router.navigate(["/admin/dashboard/rooms"])}})}getRoomById(o){this._RoomsService.getRoombyId(o).subscribe({next:t=>{console.log(t.data.room),this.roomData=t.data.room},error:t=>{},complete:()=>{this.imgSrc=this.roomData.images,console.log(this.roomData.images),this.roomForm.patchValue({roomNumber:this.roomData.roomNumber,price:this.roomData.price,discount:this.roomData.discount,capacity:this.roomData.capacity,facilities:this.roomData.facilities})}})}onSelect(o){this.imgSrc=o.addedFiles,this.files.push(...o.addedFiles)}onRemove(o){this.files.splice(this.files.indexOf(o),1)}static#e=this.\u0275fac=function(t){return new(t||i)(e.Y36(h.L),e.Y36(d.gz),e.Y36(u._W),e.Y36(d.F0))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-view-rooms"]],decls:30,vars:8,consts:[[1,"h-100"],[1,"container","h-100"],[1,"row","mt-5"],[1,"col-md-9","mx-auto"],["action","",3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],["type","text","placeholder","Room Number","formControlName","roomNumber",1,"form-control"],[1,"col-md-6"],["type","number","placeholder","Price","formControlName","price",1,"form-control"],["type","number","placeholder","Capacity","formControlName","capacity",1,"form-control"],["type","number","placeholder","Discount","formControlName","discount",1,"form-control"],["appearance","outline",1,"w-100",3,"hideRequiredMarker"],["multiple","","formControlName","facilities","placeholder","facilities"],[3,"value",4,"ngFor","ngForOf"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"col-md-12","text-end"],["type","button","routerLink","/admin/dashboard/rooms",1,"sec-btn"],["type","submit",1,"blue-btn",3,"disabled"],[3,"value"],[1,"fa-solid","fa-arrow-up-from-bracket","d-block"],["alt","",3,"src",4,"ngFor","ngForOf"],["alt","",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("submit",function(){return n.onSubmit(n.roomForm)}),e.TgZ(5,"div",5)(6,"div",6),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"div",8),e._UZ(9,"input",9),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",10),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",8)(15,"mat-form-field",12)(16,"mat-select",13),e.YNc(17,y,2,2,"mat-option",14),e.qZA()()(),e.TgZ(18,"div",6)(19,"div")(20,"ngx-dropzone",15),e.NdJ("change",function(m){return n.onSelect(m)}),e.YNc(21,N,3,0,"ngx-dropzone-label",16),e.YNc(22,q,2,1,"ngx-dropzone-label",16),e.YNc(23,U,1,2,"ngx-dropzone-image-preview",17),e.qZA()()(),e._UZ(24,"hr"),e.TgZ(25,"div",18)(26,"button",19),e._uU(27,"Cancel"),e.qZA(),e.TgZ(28,"button",20),e._uU(29,"Save"),e.qZA()()()()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",n.roomForm),e.xp6(11),e.Q6J("hideRequiredMarker",n.hideRequiredMarker),e.xp6(2),e.Q6J("ngForOf",n.facilities),e.xp6(3),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngIf",!n.imgSrc),e.xp6(1),e.Q6J("ngIf",n.imgSrc),e.xp6(1),e.Q6J("ngForOf",n.files),e.xp6(5),e.Q6J("disabled",n.roomForm.invalid))},dependencies:[c.sg,c.O5,d.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,p._f,p.NP,p.sv,w.KE,C.gD,S.ey],styles:["section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:1rem}section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-bottom:20px}section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:16px 5px;background-color:transparent;border:1px solid rgb(197,186,186)}section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#8b8787}"]})}return i})();const z=[{path:"",redirectTo:"roomsHome",pathMatch:"full"},{path:"",component:A},{path:"addeditview",component:f},{path:"addeditview/:id",component:f}];let F=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#o=this.\u0275mod=e.oAB({type:i});static#t=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(z),d.Bz]})}return i})();var O=a(9218);let J=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#o=this.\u0275mod=e.oAB({type:i});static#t=this.\u0275inj=e.cJS({imports:[c.ez,F,O.m]})}return i})()}}]);